// Form Block

// stylelint-disable selector-no-qualifying-type, selector-no-type

@mixin form-block($spacing) {
  @include clearfix;
  display: block;
  margin-bottom: $spacing;
  position: relative;
}



// Form control sizing
//
// [converter] $parent hack

@mixin input-size($parent, $font-size, $height, $padding) {
  #{$parent} {
    font-size: $font-size;
    height: $height;
    padding: $padding;

    // Feedback positioning
    ~ .form-block__feedback,
    ~ .form-block__helper {
      top: $line-height-computed + $form-label-spacing + $padding;
    }
  }

  select#{$parent} {
    height: $height;
    line-height: 1;
  }

  textarea#{$parent},
  select[multiple]#{$parent} {
    height: auto;
  }

  // Validation feedback
  .form-horizontal #{$parent} ~ .form-block__feedback,
  .form-horizontal #{$parent} ~ .form-block__helper {
    top: $padding;
  }
}



// Control group size
//
// [converter] $parent hack

@mixin control-group-size($parent, $font-size, $height, $padding) {
  #{$parent} {
    font-size: $font-size;
    height: $height;
    padding: $padding;
  }

  select#{$parent} {
    height: $height;
    line-height: 1;
  }

  textarea#{$parent},
  select[multiple]#{$parent} {
    height: auto;
  }
}



// Form control states

@mixin form-control-focus($color: $input-border-focus) {
  &:focus {
    border-color: $color;
    box-shadow: 0 0 $input-border-focus-shadow-lenght 0 rgba($color,
      $input-border-focus-opacity);
    outline: 0;
  }
}



// Disabled state
@mixin state-disabled {
  &,
  &:hover,
  &:focus {
    background-color: $input-bg-disabled;
    border-color: $input-border-color;
    box-shadow: none;
    cursor: not-allowed;
    pointer-events: none;
  }
}



// Placeholder mixin
@mixin placeholder($color: $input-color-placeholder) {
  // stylelint-disable selector-no-vendor-prefix

  // Firefox
  &::-moz-placeholder {
    color: $color;
    line-height: 1;

    // Override Firefox's unusual default opacity;
    // see https://github.com/twbs/bootstrap/pull/11526
    opacity: 1;
  }

  // Internet Explorer 10+
  &:-ms-input-placeholder {
    color: $color;
    line-height: 1;
  }

  // Safari and Chrome
  &::-webkit-input-placeholder {
    color: $color;
    line-height: 1;
  }

  &::placeholder {
    color: $color;
    line-height: 1;
  }

  // stylelint-enable selector-no-vendor-prefix
}



// Estado de validación: se aplica sobre el bloque contenedor, no sobre bloques
// individuales.

@mixin form-control-validations-state($color, $icon) {
  $hover-color: state-hover-modifier($color);
  $focus-color: state-focus-modifier($color);

  > .form-control,
  > div > .form-control,
  .control-group__addon {
    border: 1px solid $color;

    &:hover {
      border-color: $hover-color;
    }

    &:focus {
      border-color: $focus-color;
      box-shadow: 0 0 $input-border-focus-shadow-lenght 0 rgba($color,
        $input-border-focus-opacity);
    }
  }

  // Selected state
  input[type="radio"],
  input[type="checkbox"] {
    border-color: $color;

    &:checked {
      border-color: $color;
    }
  }

  // Estilos específicos para radiobuttons
  input[type="radio"]:checked::after {
    background-color: $color;
  }

  // Estilos específicos para checkbox
  input[type="checkbox"]:checked::after {
    color: $color;
  }

  // Cambia el border color en :hover sobre el label
  &.checkbox label:hover > input[type="checkbox"],
  &.radio label:hover > input[type="radio"],
  .radio-box:hover,
  .checkbox-box:hover {
    border-color: $color;
  }

  // Feedback elements
  > .form-block__feedback,
  > .form-block__note,
  > div > .form-block__feedback,
  > div > .form-block__note {
    @include show-element;
    animation: form-block--enter-animation ($transition-timing-slow / 4) ease-in;
    color: $color;
  }

  > .form-block__feedback,
  > div > .form-block__feedback, {
    &::before {
      content: $icon;
    }
  }

  // Pinta los íconos del control-helper del color del estado.
  .form-block__helper {
    color: $color;
  }
}


// @make-checked-element
//
// Posiciona un elemento visual estilo `checkbox` en la esquina superior izquierda
// del elemento contenedor.
//
// $background - Color de fondo del elemento.
// $color - Color del ícono.
// $size, $distance - Posición del elemento respecto de la esquina superior izquierda
// (default = 0).
//
// Styleguide Helpers.Forms.CheckedElement

@mixin make-checked-element($background, $color, $size, $distance: 0) {
  background-color: $background;
  border-color: $background;
  height: $size;
  opacity: 0;
  position: absolute;
  right: $distance;
  top: $distance;
  width: $size;
  z-index: $zindex-element + 1;

  &:checked::after {
    color: $color;
    font-size: 100%;
    margin-right: ($size / 3) * -1;
    margin-top: ($size / 3) * -1;
    position: absolute;
    right: 50%;
    top: 50%;
  }

  &:checked {
    opacity: 1;
  }
}


// Note animations

@keyframes form-block--enter-animation {
  0% {
    @include hide-element;
    opacity: 0;
  }

  1% {
    @include show-element;
    opacity: 0;
  }

  100% {
    @include show-element;
    opacity: 1;
  }
}

@keyframes form-block--exit-animation {
  0% {
    @include show-element;
    opacity: 1;
  }

  99% {
    @include show-element;
    opacity: 0;
  }

  100% {
    @include hide-element;
    opacity: 0;
  }
}

// stylelint-enable selector-no-qualifying-type, selector-no-type
