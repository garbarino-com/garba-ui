// Form Block

// stylelint-disable selector-no-qualifying-type, selector-no-type

@mixin form-block($spacing) {
  @include clearfix;
  display: block;
  margin-bottom: $spacing;
  position: relative;
}



// Form control sizing
//
// [converter] $parent hack

@mixin input-size($parent, $font-size, $height, $padding) {
  #{$parent} {
    font-size: $font-size;
    height: $height;
    padding: $padding;

    // Feedback positioning
    ~ .block-validation--feedback {
      top: $line-height-computed + $form-label-spacing + $padding;
    }
  }

  select#{$parent} {
    height: $height;
    line-height: 1;
  }

  textarea#{$parent},
  select[multiple]#{$parent} {
    height: auto;
  }

  // Validation feedback
  .form-horizontal [class*="block__has-"] #{$parent} ~ .block-validation--feedback {
    top: $padding;
  }
}



// Form control states

@mixin form-control-focus($color: $input-border-focus) {
  &:focus {
    border-color: $color;
    box-shadow: 0 0 $input-border-focus-shadow-lenght 0 rgba($color,
      $input-border-focus-opacity);
    outline: 0;
  }
}



// Placeholder mixin
@mixin placeholder($color: $input-color-placeholder) {
  // stylelint-disable selector-no-vendor-prefix

  // Firefox
  &::-moz-placeholder {
    color: $color;
    line-height: 1;

    // Override Firefox's unusual default opacity;
    // see https://github.com/twbs/bootstrap/pull/11526
    opacity: 1;
  }

  // Internet Explorer 10+
  &:-ms-input-placeholder {
    color: $color;
    line-height: 1;
  }

  // Safari and Chrome
  &::-webkit-input-placeholder {
    color: $color;
    line-height: 1;
  }

  &::placeholder {
    color: $color;
    line-height: 1;
  }

  // stylelint-enable selector-no-vendor-prefix
}



// Estado de validación: se aplica sobre el bloque contenedor, no sobre bloques
// individuales.

@mixin form-control-validations-state($color, $icon) {
  $hover-color: state-hover-modifier($color);
  $focus-color: state-focus-modifier($color);

  > .form-control {
    border: 1px solid $color;

    &:hover {
      border-color: $hover-color;
    }

    &:focus {
      border-color: $focus-color;
      box-shadow: 0 0 $input-border-focus-shadow-lenght 0 rgba($color,
        $input-border-focus-opacity);
    }
  }

  // Selected state
  input[type="radio"],
  input[type="checkbox"] {
    border-color: $color;

    &:checked {
      border-color: $color;
    }
  }

  // Estilos específicos para radiobuttons
  input[type="radio"]:checked::after {
    background-color: $color;
  }

  // Estilos específicos para checkbox
  input[type="checkbox"]:checked::after {
    color: $color;
  }


  // Feddback elements
  > .block-validation--feedback,
  > .block-validation--note,
  > div > .block-validation--feedback,
  > div > .block-validation--note {
    @include show-element;
    animation: form-block--enter-animation ($transition-timing-slow / 4) ease-in;
    color: $color;
  }

  > .block-validation--feedback,
  > div > .block-validation--feedback, {
    &::before {
      content: $icon;
    }
  }
}



// Note animations

@keyframes form-block--enter-animation {
  0 {
    @include hide-element;
    opacity: 0;
  }

  1% {
    @include show-element;
    opacity: 0;
  }

  100% {
    @include show-element;
    opacity: 1;
  }
}

@keyframes form-block--exit-animation {
  0 {
    @include show-element;
    opacity: 1;
  }

  99% {
    @include show-element;
    opacity: 0;
  }

  100% {
    @include hide-element;
    opacity: 0;
  }
}

// stylelint-enable selector-no-qualifying-type, selector-no-type
