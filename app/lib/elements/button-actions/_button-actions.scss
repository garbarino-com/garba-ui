// Action buttons
//
// Las classes de botones de acción se pueden usar en los elementos `<a>` o `<button>`.
// Los botones de acción son botones que ejecutan acciones que sean propias del
// contexto en el que se encuentra el usuario y en ciertos casos para disparar
// funcionalidades dentro de la página. No se deben usar para navegar entre
// documentos o secciones, para eso son los links o botones.
//
// > Los *Action buttons* carecen de un texto que describa la acción que ejecutan
// por lo que se sugiere acompañar su utilización con un *tooltip* cumpla esa función
// (Nota: deberíamos estudiar como asistir al usuario en dispositivos touch).
//
// .button--action__primary - Ejecuta la acción primaria en un grupo de acciones
// (por el momento, está reservado a la acción de *Quitar del carrito*).
// .button--action__fav - Marcar item como favorito.
// .button--action__facebook - Compartir item en Facebook.
// .button--action__twitter - Compartir item en Twitter.
// .button__is-active - Todos los modificadores tienen disponible su propia variable
// de la clase `button__is-active` para cuando sea necesario marcar que una acción
// ya se ha ejecutado (ej. /"El producto se ha marcado como favorito"/).
// .button--action--sm - Única variable de tamaño. Es combinable con todas las otras
// variantes.
//
// Markup: button-actions.hbs
//
// Styleguide Elements.Buttons.6-Action

.button--action {
  @include button-action-size($btn-action-padding, $btn-action-size, $btn-action-font-size);
  @include text-hide;
  background-color: $btn-action-bg;
  background-image: none;
  border: 1px solid transparent;
  border-radius: $border-radius-base;
  box-shadow: 0 0 0 0 transparent;
  color: $btn-action-color;
  cursor: pointer;
  display: inline-block;
  font-weight: $btn-font-weight;
  margin-bottom: 0;
  position: relative;
  text-align: center;
  text-transform: $btn-text-transform;
  touch-action: manipulation;
  user-select: none;
  vertical-align: middle;
  white-space: nowrap;

  &:hover {
    background-color: $btn-action-hover-bg;
    text-decoration: none;
  }

  // Hover and focus styles
  &:focus,
  &.button__is-active {
    background-color: $btn-action-hover-bg;
    outline: 0;
  }

  &.button__is-active {
    cursor: default;
  }

  > i,
  > span {
    left: 50%;
    margin-left: ($btn-action-font-size * .5) * -1;
    margin-top: ($btn-action-font-size * .5) * -1;
    position: absolute;
    top: 50%;

    &::before {
      @include icon-element($btn-action-font-size);
      width: $btn-action-font-size;
    }
  }

  // Uso en alerts
  .alert__is-dismissible > & {
    height: $alert-icon-size;
    right: $alert-spacer;
    width: $alert-icon-size;

    > [class^="gb-icon-"],
    > [class^="icon-"] {
      @include icon-element($spacer-lg);

      // stylelint-disable max-nesting-depth

      &::before {
        color: $alert-icon-color;
      }

      // stylelint-enable max-nesting-depth
    }
  }
}


// Size variant
.button--action--sm {
  @include button-action-size($btn-action-sm-padding, $btn-action-sm-size,
    $btn-action-sm-font-size);
  @include text-hide;
}



// Primary action
// TODO(ecalvi): We should extend this class so it can be also used for other actions.

.button--action__primary {
  color: $btn-action-primary;

  @include button-action-variant($btn-action-primary, $icon-trash);
}

// Fav item action
.button--action__fav {
  @include button-action-variant($brand-fav, $icon-fav);

  // trigger animation on focus
  &:focus > i {
    @include prefixer(
      animation, action-active .8s steps(28) 1, webkit ms moz spec);
    background-image: url(#{$images-url}animation--fav.png);
    background-position: left;
    background-repeat: no-repeat;
    background-size: 2900%;
    display: block;
    height: $btn-action-font-size * 2.5;
    margin-left: ($btn-action-font-size * 1.25) * -1;
    margin-top: ($btn-action-font-size * 1.25) * -1;
    width: $btn-action-font-size * 2.5;

    &::before {
      content: initial;
    }
  }
}

// Fav item action
.button--action__default {
  @include button-action-variant($brand-default, $icon-default);
}

// Share on facebook action
.button--action__facebook {
  @include button-action-variant($brand-facebook, $icon-facebook);
}

// Share on twitter action
.button--action__twitter {
  @include button-action-variant($brand-twitter, $icon-twitter);
}

