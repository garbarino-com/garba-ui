//
// Base styles

.button {
  @include button-size($btn-base-padding-x, $btn-height-base, $font-size-base);
  background-image: none;
  border: 1px solid transparent;
  border-radius: $border-radius-base;
  cursor: pointer;
  display: inline-block;
  font-weight: $btn-font-weight;
  margin-bottom: 0;
  position: relative;
  text-align: center;
  text-transform: $btn-text-transform;
  touch-action: manipulation;
  user-select: none;
  vertical-align: middle;
  white-space: nowrap;

  // Hover and focus styles
  &:focus,
  &.focus {
    outline: 0;
  }

  &:active,
  &.active {
    background-image: none;
  }
}

// Color modifiers
// Make this default
.button,
.button--secondary {
  @include button-variant($btn-secondary-color, $btn-secondary-bg);
}

.button--main {
  @include button-variant($btn-main-color, $btn-main-bg);
}

.button--primary {
  @include button-variant($btn-primary-color, $btn-primary-bg);
}

.button--link {
  @include button-variant($btn-link-color, $btn-link-bg);

  // Define hover behavior
  &:hover {
    text-decoration: underline;
  }
}

.button--facebook {
  @include button-variant($btn-facebook-color, $btn-facebook-bg);
}

// Size modifiers
.button--lg {
  @include button-size($btn-large-padding-x, $btn-height-lg-size, $font-size-lg);
}

.button--sm {
  @include button-size($btn-small-padding-x, $btn-height-sm-size, $font-size-sm);
}

// Convert to block
.button--block {
  display: block;
  width: 100%;

  & + & {
    margin-top: .5rem;
  }
}


// Add this class to fix button to bottom of the page
.button--is-fixed-to-bottom {
  border-radius: 0;
  bottom: 0;
  display: block;
  left: 0;
  position: fixed;
  right: 0;
  width: 100%;
  z-index: $zindex-fixed-button;
}


// State modifiers

// Disabled and Loading states
.button__is-disabled,
.button__is-loading {
  &.button,
  &.button:disabled,
  &.button--main,
  &.button--primary,
  &.button--secondary,
  &.button--link,
  &.button--facebook {
    &,
    &:hover,
    &:focus {
      background-color: $btn-disabled-bg;
      color: $btn-disabled-color;
      outline: 0;
      transform: translateY(0);
    }
  }
}

// Define shadow and cursor only for disabled state
.button__is-disabled {
  &.button,
  &.button:disabled,
  &.button--main,
  &.button--primary,
  &.button--secondary,
  &.button--link,
  &.button--facebook {
    &,
    &:hover,
    &:focus {
      box-shadow: $btn-box-shadow-value darken($btn-disabled-bg, 15%);
      cursor: not-allowed;
    }
  }
}

// Loading state spinner definitions
.button__is-loading {
  box-shadow: 0 0 0 0 transparent;
  cursor: default;

  // Spinner pseudo-element
  &::before {
    @include make-pseudo-element(inline-block);
    @include add-spinner($btn-spinner-base-size, $btn-spinner-border-width,
      $btn-spinner-color-inactive, $btn-spinner-color-active);
    margin-right: $btn-spinner-spacing;
    margin-top: px-to-rem(-2px);
  }

  &.button--lg::before {
    @include add-spinner-variant-to-button($btn-spinner-lg-size);
  }

  &.button--sm::before {
    @include add-spinner-variant-to-button($btn-spinner-sm-size,
      $btn-spinner-sm-border-width);
  }
}


// Has icon button modifier
.button__has-icon {
  padding-left: $btn-icon-padding-x;
  padding-right: $btn-icon-padding-x;
  text-transform: none;
}

// Provisionally provide a style fallback to old icon fonts until they are
// deprecated in upcoming releases.
.button__has-icon,
.button__has-icon > [class^="gb-icon-"] {
  &::before {
    display: block;
    font-family: "gb-font" !important;
    font-size: $btn-icon-size;
    font-style: normal;
    font-weight: 400;
    left: 1rem;
    line-height: 1;
    margin-top: ($btn-icon-size / 2) * -1;
    position: absolute;
    speak: none;
    top: 50%;
  }

  &.button--facebook::before {
    content: "\e914";
  }
}
